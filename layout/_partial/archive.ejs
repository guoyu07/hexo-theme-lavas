<div class="article-list">
    <% if (pagination == 2) { %>
        <% page.posts.each(function (post) { %>
            <%- partial('article', {post: post, index: true, hasContent: false}) %>
        <% }) %>
    <% } else { %>
        <% var last; %>

        <% page.posts.each(function (post, i) { %>
            <%
                var year = post.date.year();
                var month = post.date.month() + 1;
                month = month >= 10 ? month : '0' + month;
            %>
            <% if (last != year) { %>

                <% if (last != null) { %>
                    </div></section>
                <% } %>

                <% last = year; %>
                <section class="archives-wrap">
                    <div class="archive-year-wrap">
                        <span class="archive-year"><%= year %> / <%= month %></span>
                    </div>
                <div class="archives">
            <% } %>
            <%- partial('article', {post: post, index: true, hasContent: false}) %>
        <% }) %>

        <% if (page.posts.length) { %>
            </div></section>
        <% } %>

    <% } %>
</div>

<% if (page.total > 1) { %>
    <nav id="page-nav">
        <%- paginator({
            prev_text: __('prev'),
            next_text: __('next')
        }) %>
    </nav>
<% } %>
